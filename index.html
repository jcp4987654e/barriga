<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatización de Bomba con VFD: Guía Interactiva</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Teko:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto Mono', monospace;
            background-color: #111827;
            color: #E5E7EB;
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #38BDF8;
            border-bottom-color: #38BDF8;
        }
        .card {
            background-color: #1F2937;
            border-radius: 0.5rem;
            border: 1px solid #374151;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.2), 0 4px 6px -2px rgb(0 0 0 / 0.2);
        }
        .h-line {
            width: 60px;
            height: 2px;
            background-color: #38BDF8;
            margin: 0 auto;
        }
        #main-header {
            transition: opacity 0.5s ease-in-out;
        }
        .content-container {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        .integrante-nombre {
            transition: color 0.3s;
        }
        .integrante-nombre:hover {
            color: #38BDF8;
        }
        .presentation-nav {
            transition: opacity 0.3s ease-in-out;
        }
        .image-modal-backdrop {
            transition: opacity 0.3s ease-in-out;
        }
        .image-modal-content {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .clickable-image {
            cursor: zoom-in;
        }
        .section-title {
            font-family: 'Teko', sans-serif;
            font-size: 3.5rem;
            letter-spacing: 1px;
            color: #F9FAFB;
        }
        .section-subtitle {
            font-family: 'Roboto Mono', monospace;
        }
        #motor-shaft {
            transition: transform 0.1s linear;
            transform-origin: center;
        }
        .presentation-slide {
            transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out;
        }
        body.presentation-mode main > section {
            display: none;
            opacity: 0;
            transform: translateY(30px);
        }
         body.presentation-mode main > section.active-slide {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .btn-start-motor {
            background-color: #22c55e;
            color: white;
            transition: background-color 0.3s, box-shadow 0.3s;
            box-shadow: 0 0 15px #22c55e50;
        }
        .btn-start-motor:hover {
            background-color: #16a34a;
        }
        .btn-reset-motor {
            background-color: #ef4444;
            color: white;
        }
        .btn-reset-motor:hover {
             background-color: #dc2626;
        }
        /* Styles for interactive motor parts list */
        .motor-part-btn {
            transition: background-color 0.2s, border-color 0.2s, color 0.2s;
        }
        .motor-part-btn.active {
            background-color: #0ea5e920; /* sky-500 with opacity */
            border-color: #38bdf8;
            color: #7dd3fc;
            font-weight: 700;
        }
        .motor-part-info {
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="overflow-x-hidden">
    
    <!-- Floating Buttons -->
    <div class="fixed top-4 right-4 z-[60] flex space-x-2">
        <button id="play-presentation-btn" class="p-3 bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-full shadow-lg hover:bg-gray-700 transition">
            <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            <svg id="stop-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden text-white"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>
        </button>
        <button id="fullscreen-btn" class="p-3 bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-full shadow-lg hover:bg-gray-700 transition">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
        </button>
    </div>

    <!-- Presentation Navigation Arrows -->
    <div id="presentation-nav-prev" class="presentation-nav fixed left-4 top-1/2 -translate-y-1/2 z-[60] opacity-0 pointer-events-none">
        <button class="p-4 bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-full shadow-lg hover:bg-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed">
             <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-white"><polyline points="15 18 9 12 15 6"></polyline></svg>
        </button>
    </div>
     <div id="presentation-nav-next" class="presentation-nav fixed right-4 top-1/2 -translate-y-1/2 z-[60] opacity-0 pointer-events-none">
        <button class="p-4 bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-full shadow-lg hover:bg-gray-700 transition">
             <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-white"><polyline points="9 18 15 12 9 6"></polyline></svg>
        </button>
    </div>

    <!-- Cover Section -->
    <section id="caratula" class="relative text-white" style="min-height: 100vh; overflow: hidden;">
        <div class="absolute inset-0 bg-gray-900">
            <img src="https://images.unsplash.com/photo-1617994422012-ba24c3a4df76?q=80&w=2070&auto=format&fit=crop" alt="Fondo de sistema de bombeo moderno" class="w-full h-full object-cover opacity-20">
        </div>
        <div class="relative z-10 flex flex-col items-center justify-center min-h-screen text-center p-8">
            
            <div id="initial-content-wrapper" class="content-container w-full flex flex-col items-center justify-center">
                <h1 class="text-5xl md:text-7xl font-black tracking-tight text-white my-4" style="font-family: 'Teko', sans-serif; text-shadow: 2px 2px 8px rgba(0,0,0,0.7);">Automatización y Control Avanzado de Bomba de Riego con Motor Monofásico y VFD</h1>
                <button id="start-presentation-btn" class="mt-8 inline-block bg-sky-400 text-gray-900 font-bold py-4 px-10 rounded-lg text-xl hover:bg-sky-300 transition-colors duration-300 shadow-lg">
                    Comenzar Exposición
                </button>
            </div>
            
            <div id="integrantes-content-wrapper" class="content-container absolute inset-0 w-full flex-col items-center justify-center opacity-0 pointer-events-none flex">
                 <p class="text-4xl font-bold mb-8">Integrantes</p>
                 <div class="text-5xl md:text-7xl font-semibold space-y-4">
                     <p class="integrante-nombre">Jesus Castellanos</p>
                     <p class="integrante-nombre">Lucas Espinola</p>
                     <p class="integrante-nombre">Tobias Copa</p>
                     <p class="integrante-nombre">Joaquin Huaman</p>
                     <p class="integrante-nombre">Brian Alcon</p>
                 </div>
            </div>

        </div>
    </section>

    <!-- Main Header -->
    <header id="main-header" class="bg-gray-900/80 backdrop-blur-sm border-b border-gray-700 sticky top-0 z-50 opacity-0">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-sky-400" style="font-family: 'Teko', sans-serif;">Automatización de Bomba</h1>
            <div class="hidden md:flex flex-wrap items-center justify-center space-x-4 lg:space-x-6">
                <a href="#intro" class="nav-link font-semibold pb-1">Introducción</a>
                <a href="#motor-intro" class="nav-link font-semibold pb-1">El Motor</a>
                <a href="#motor-parts" class="nav-link font-semibold pb-1">Anatomía</a>
                <a href="#vfd" class="nav-link font-semibold pb-1">El VFD</a>
                <a href="#beneficios" class="nav-link font-semibold pb-1">Beneficios</a>
                <a href="#diseno" class="nav-link font-semibold pb-1">Diseño</a>
                <a href="#precauciones" class="nav-link font-semibold pb-1">Precauciones</a>
                <a href="#dispositivos" class="nav-link font-semibold pb-1">Dispositivos</a>
                <a href="#conclusion" class="nav-link font-semibold pb-1">Conclusión</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-400">
                <div class="w-6 h-0.5 bg-white mb-1.5"></div>
                <div class="w-6 h-0.5 bg-white"></div>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4">
             <a href="#intro" class="block py-2 text-center nav-link">Introducción</a>
            <a href="#motor-intro" class="block py-2 text-center nav-link">El Motor</a>
            <a href="#motor-parts" class="block py-2 text-center nav-link">Anatomía del Motor</a>
            <a href="#vfd" class="block py-2 text-center nav-link">El VFD</a>
            <a href="#beneficios" class="block py-2 text-center nav-link">Beneficios</a>
            <a href="#diseno" class="block py-2 text-center nav-link">Diseño y Seguridad</a>
            <a href="#precauciones" class="block py-2 text-center nav-link">Precauciones</a>
            <a href="#dispositivos" class="block py-2 text-center nav-link">Dispositivos</a>
            <a href="#conclusion" class="block py-2 text-center nav-link">Conclusión</a>
        </div>
    </header>

    <main>
        <!-- Introduction Section -->
        <section id="intro" class="py-16 md:py-24 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="section-title">Contexto y Objetivos del Proyecto</h2>
                    <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 mb-12 section-subtitle">
                        Partimos de una instalación de riego típica: una bomba en un pozo de 20m, accionada por un motor monofásico de 1,5 HP. El control original, un simple interruptor, genera problemas mecánicos e hidráulicos. Nuestro objetivo es transformar este sistema en uno automatizado, inteligente y seguro.
                    </p>
                </div>
                <div class="max-w-5xl mx-auto card p-8">
                     <p class="text-center text-2xl font-bold mb-6 text-sky-400">Objetivos de Ingeniería</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                        <div>
                            <div class="text-5xl mb-4">💨</div>
                            <h3 class="font-bold text-xl">Arranque y Parada Suaves</h3>
                            <p class="text-gray-400">Eliminar el estrés mecánico y el destructivo golpe de ariete.</p>
                        </div>
                        <div>
                            <div class="text-5xl mb-4">🔄</div>
                            <h3 class="font-bold text-xl">Inversión de Giro</h3>
                            <p class="text-gray-400">Habilitar una función esencial para el mantenimiento y desatasco de la bomba.</p>
                        </div>
                        <div>
                            <div class="text-5xl mb-4">🎛️</div>
                            <h3 class="font-bold text-xl">Control de Velocidad Preciso</h3>
                            <p class="text-gray-400">Regular el caudal para optimizar el uso de agua y energía.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Motor Intro Section -->
        <section id="motor-intro" class="py-16 md:py-24 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="section-title">El Motor Monofásico: Corazón del Sistema</h2>
                    <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 section-subtitle">
                        Antes de optimizarlo, entendamos al protagonista. El motor monofásico es el más común en aplicaciones domésticas y de baja potencia por su simplicidad y costo.
                    </p>
                     <div class="h-line mt-6"></div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-sky-400 mb-4">Principio de Funcionamiento</h3>
                        <p class="text-gray-300 mb-4 text-base">El principio básico de funcionamiento de un motor monofásico de inducción se basa en el fenómeno de inducción electromagnética, descrito por la Ley de Faraday. Al aplicar corriente alterna monofásica al bobinado del estator, se genera un campo magnético alterno. No obstante, a diferencia de un motor trifásico, este campo no es giratorio por sí solo, lo que impide que el motor arranque espontáneamente.</p>
                        <p class="text-gray-300 mb-4 text-base">Para resolver este problema, se emplea un bobinado auxiliar desplazado en el espacio respecto al principal, y se utiliza un capacitor para desfasar su corriente eléctrica. Así se crean dos campos magnéticos desfasados que combinados simulan un campo giratorio, lo que permite que el rotor (de tipo jaula de ardilla) comience a girar.</p>
                        <p class="text-gray-300 text-base">Una vez que el motor arranca, en algunos modelos el bobinado auxiliar se desconecta mediante un interruptor centrífugo; en otros, permanece activo para mejorar el funcionamiento (motor con capacitor permanente).</p>
                    </div>
                    <div class="card p-8 bg-green-900/50 border-green-500">
                        <h3 class="text-2xl font-bold text-green-400 mb-4">La Solución: Motores PSC</h3>
                        <p class="text-gray-300 mb-4">La solución para el control con VFD es usar un motor de tipo **PSC (Permanent Split Capacitor)**. Este diseño no tiene interruptor centrífugo y el capacitor está conectado permanentemente. Es la única topología de motor monofásico compatible de forma nativa con el control de velocidad por VFD, una vez que se retira su capacitor original.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Motor Parts Section -->
        <section id="motor-parts" class="py-16 md:py-24 bg-gray-800/50 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="section-title">Anatomía Interactiva del Motor</h2>
                    <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 section-subtitle">
                        Selecciona un componente de la lista para conocer su función.
                    </p>
                    <div class="h-line mt-6"></div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
                    <!-- Column 1: List of Parts -->
                    <div class="lg:col-span-1">
                        <div id="motor-parts-list" class="flex flex-col space-y-2">
                            <button data-part="carcasa" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Carcasa</button>
                            <button data-part="estator" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Estátor</button>
                            <button data-part="bobinado" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Bobinado</button>
                            <button data-part="rotor" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Rotor</button>
                            <button data-part="condensador" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Condensador</button>
                            <button data-part="rodamientos" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Rodamientos</button>
                            <button data-part="ventilador" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Ventilador</button>
                            <button data-part="tapa-delantera" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Tapa Delantera</button>
                            <button data-part="tapa-trasera" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Tapa Trasera</button>
                            <button data-part="arandela" class="motor-part-btn w-full text-left p-4 rounded-lg border border-gray-600 bg-gray-700/50 hover:bg-gray-600/80">Arandela Axial</button>
                        </div>
                    </div>

                    <!-- Column 2: Image and Description -->
                    <div class="lg:col-span-2">
                        <div class="relative mb-4">
                            <img src="https://tercesa.com/wp-content/uploads/2023/02/Cuales-son-las-partes-de-un-motor-monofasico-e1675432323472.png" alt="Despiece de un motor monofásico" class="w-full h-auto rounded-lg">
                        </div>
                        <div id="motor-part-info-display" class="card p-8 min-h-[150px] flex flex-col justify-center">
                            <div id="part-initial" class="motor-part-info text-center">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Explora el Motor</h3>
                                <p class="text-gray-300">Selecciona una parte en la lista de la izquierda para ver su descripción detallada aquí.</p>
                            </div>
                            <div id="part-carcasa" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Carcasa</h3>
                                <p class="text-gray-300">Envolvente principal del motor, protege los componentes internos y disipa calor.</p>
                            </div>
                            <div id="part-rotor" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Rotor</h3>
                                <p class="text-gray-300">Parte giratoria del motor, que reacciona al campo magnético giratorio generado por el estator.</p>
                            </div>
                            <div id="part-estator" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Estátor</h3>
                                <p class="text-gray-300">Parte fija con los bobinados que generan el campo magnético alterno.</p>
                            </div>
                             <div id="part-bobinado" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Bobinado</h3>
                                <p class="text-gray-300">Cable conductor enrollado, responsable de crear el campo electromagnético en el estator.</p>
                            </div>
                            <div id="part-condensador" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Condensador (Capacitor)</h3>
                                <p class="text-gray-300">Almacena energía eléctrica y crea el desfase necesario en el bobinado auxiliar.</p>
                            </div>
                            <div id="part-ventilador" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Ventilador</h3>
                                <p class="text-gray-300">Asegura la circulación de aire para refrigerar el motor durante su funcionamiento.</p>
                            </div>
                            <div id="part-rodamientos" class="motor-part-info hidden opacity-0">
                                 <h3 class="text-2xl font-bold text-sky-400 mb-4">Rodamientos</h3>
                                 <p class="text-gray-300">Permiten el giro suave del eje y del rotor, minimizando la fricción y el desgaste.</p>
                            </div>
                            <div id="part-tapa-trasera" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Tapa Trasera</h3>
                                <p class="text-gray-300">Pieza que sella la parte posterior del motor, sosteniendo el rodamiento y protegiendo el eje desde atrás.</p>
                            </div>
                            <div id="part-tapa-delantera" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Tapa Delantera</h3>
                                <p class="text-gray-300">Cubre la parte frontal del motor, también sostiene el rodamiento del eje delantero.</p>
                            </div>
                            <div id="part-arandela" class="motor-part-info hidden opacity-0">
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">Arandela Axial</h3>
                                <p class="text-gray-300">Componente de ajuste mecánico que limita el movimiento axial del rotor dentro del motor.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- VFD Section -->
        <section id="vfd" class="py-16 md:py-24 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="section-title">El Cerebro del Sistema: El Variador de Frecuencia (VFD)</h2>
                    <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 section-subtitle">
                        El VFD toma la energía de la red y la moldea para entregar al motor exactamente lo que necesita en cada momento, mediante tres etapas de conversión de potencia.
                    </p>
                    <div class="h-line mt-6"></div>
                </div>
                <div class="max-w-4xl mx-auto card p-8">
                    <img src="https://blogespanol.se.com/wp-content/uploads/2023/04/Blog-VFD_Diagrama-04-1024x600.png" alt="Arquitectura de un VFD" class="w-full h-auto object-contain rounded-lg mb-6 clickable-image" data-title="Arquitectura del VFD" data-description="Diagrama de bloques de un Variador de Frecuencia: Red AC -> Puente Rectificador -> Bus de DC (con capacitores) -> Inversor (con IGBTs) -> Salida AC al Motor.">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-xl font-bold text-sky-400 mb-2">Modulación por Ancho de Pulso (PWM)</h4>
                            <p class="text-gray-300">El VFD "trocea" la tensión de DC miles de veces por segundo para reconstruir una nueva onda de AC. Variando el ancho de los pulsos controla la tensión (par), y variando la periodicidad controla la frecuencia (velocidad).</p>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-sky-400 mb-2">Control Escalar V/Hz</h4>
                            <p class="text-gray-300">Para mantener la fuerza del motor a bajas velocidades, el VFD mantiene constante la relación Voltaje/Frecuencia. Si reduce la frecuencia a la mitad, también reduce la tensión a la mitad, garantizando un par adecuado.</p>
                        </div>
                    </div>
                </div>
                 <div class="max-w-4xl mx-auto card p-8 mt-8">
                    <h3 class="text-2xl font-bold text-center text-sky-400 mb-6">Simulador Interactivo de VFD</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                        <div class="md:col-span-2">
                             <div class="flex items-center space-x-4 mb-4">
                                 <button id="motor-control-btn" class="btn-start-motor font-bold py-2 px-4 rounded-lg w-full">Arrancar Motor</button>
                             </div>
                             <label for="frequency-slider" class="block font-semibold mb-2">Control de Frecuencia (Hz)</label>
                             <input type="range" id="frequency-slider" min="0" max="50" value="0" step="1" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer" disabled>
                             <div class="flex justify-between text-xs px-1">
                                 <span>0 Hz</span>
                                 <span>25 Hz</span>
                                 <span>50 Hz</span>
                             </div>
                        </div>
                        <div id="motor-animation" class="flex justify-center items-center h-32">
                           <svg id="motor-svg" class="w-32 h-32" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="48" fill="#374151" stroke="#4B5563" stroke-width="2"/>
                                <circle cx="50" cy="50" r="38" fill="#1F2937" stroke="#4B5563" stroke-width="1"/>
                                <g id="motor-shaft">
                                    <circle cx="50" cy="50" r="10" fill="#9CA3AF"/>
                                    <rect x="48" y="15" width="4" height="35" fill="#9CA3AF"/>
                                    <circle cx="50" cy="15" r="3" fill="#6B7280"/>
                                </g>
                           </svg>
                        </div>
                    </div>
                     <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                         <div class="bg-gray-700 p-4 rounded-lg">
                             <p class="text-sm font-bold text-sky-400">Velocidad</p>
                             <p id="speed-output" class="text-2xl font-bold">0%</p>
                         </div>
                         <div class="bg-gray-700 p-4 rounded-lg">
                             <p class="text-sm font-bold text-sky-400">RPM</p>
                             <p id="rpm-output" class="text-2xl font-bold">0</p>
                         </div>
                         <div class="bg-gray-700 p-4 rounded-lg">
                             <p class="text-sm font-bold text-sky-400">Tensión</p>
                             <p id="voltage-output" class="text-2xl font-bold">0 V</p>
                         </div>
                         <div class="bg-gray-700 p-4 rounded-lg">
                             <p class="text-sm font-bold text-sky-400">Torque</p>
                             <p id="torque-output" class="text-2xl font-bold">0.00 Nm</p>
                         </div>
                     </div>
                </div>
            </div>
        </section>

        <!-- Benefits Section -->
        <section id="beneficios" class="py-16 md:py-24 bg-gray-800/50 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="section-title">Beneficios Prácticos de la Automatización</h2>
                     <div class="h-line mt-6"></div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-sky-400 mb-4">Arranque y Parada Suaves</h3>
                        <p class="text-gray-300 mb-4">El VFD programa rampas de aceleración y desaceleración, eliminando el golpe brusco de un arranque directo. Esto prolonga la vida útil de acoplamientos, ejes, rodamientos y la bomba.</p>
                        <img src="https://i.ytimg.com/vi/jZ2Dj_2_Vv0/maxresdefault.jpg" alt="Corrientes de arranque directo" class="w-full h-auto object-contain rounded-lg clickable-image" data-title="Estrés en Arranque Directo" data-description="Gráfico de corriente de un arranque directo, mostrando el pico de corriente que causa estrés mecánico.">
                    </div>
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-sky-400 mb-4">Eliminación del Golpe de Ariete</h3>
                        <p class="text-gray-300 mb-4">Este violento fenómeno hidráulico ocurre cuando una columna de agua se detiene abruptamente, pudiendo destruir tuberías y válvulas. Las rampas del VFD son la solución más efectiva al evitar cambios bruscos de velocidad.</p>
                        <img src="https://3.bp.blogspot.com/-HQGxIgDjt7U/XJd4J29JmZI/AAAAAAAAAhg/ffLaeBLEVY8HiDz7kutHw3YxAi1ETssLACEwYBhgL/s1600/presi%25C3%25B3n%2Bdel%2Bagua%2Ben%2Bel%2Bpunto%2Bde%2Bcierre%2Ben%2Bel%2Bgolpe%2Bde%2Bariete%2Bhidr%25C3%25A1ulico.png" alt="Animación de golpe de ariete" class="w-full h-auto object-contain rounded-lg clickable-image" data-title="Fenómeno del Golpe de Ariete" data-description="Ilustración del fenómeno de golpe de ariete, donde la detención brusca del fluido genera una onda de sobrepresión destructiva.">
                    </div>
                </div>
            </div>
        </section>

        <!-- Design and Safety Section (UPDATED) -->
        <section id="diseno" class="py-16 md:py-24 presentation-slide">
            <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h2 class="section-title">Diseño y Seguridad del Sistema</h2>
                    <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 section-subtitle">La implementación práctica se basa en un conexionado correcto y en múltiples barreras de protección para una operación segura y fiable.</p>
                     <div class="h-line mt-6"></div>
                </div>
                 <div class="max-w-xl mx-auto">
                    <div class="card p-8">
                         <h3 class="text-2xl font-bold text-sky-400 mb-4 text-center">Circuito General del Sistema</h3>
                         <p class="text-gray-300 mb-4 text-center">Este diagrama, diseñado en CadeSimu, integra todos los componentes: el circuito de fuerza, el de mando, el VFD y las protecciones críticas como disyuntores y enclavamientos para la inversión de giro.</p>
                         <img src="https://i.imgur.com/8Z6sJ3t.png" alt="Diagrama general del circuito en CadeSimu" class="w-full h-auto object-contain rounded-lg clickable-image" data-title="Circuito General del Sistema (CadeSimu)" data-description="Esquema completo del proyecto, mostrando la interconexión de todos los componentes de potencia, control y protecciones.">
                    </div>
                </div>
            </div>
        </section>

        <!-- Precautions Section -->
        <section id="precauciones" class="py-16 md:py-24 bg-gray-800/50 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                     <h2 class="section-title">Precauciones al Invertir el Giro</h2>
                     <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 section-subtitle">La inversión de giro es una operación delicada. Ignorar estas reglas puede causar daños graves al motor y al variador.</p>
                     <div class="h-line mt-6"></div>
                </div>
                 <div class="max-w-4xl mx-auto card p-8">
                     <ul class="space-y-6 text-left text-lg">
                         <li class="flex items-start">
                             <span class="text-sky-400 mr-4 mt-1 text-2xl">⚠️</span>
                             <div><strong>Detención Completa del Motor:</strong> Es imprescindible que el rotor esté completamente detenido antes de conmutar. Invertir el giro en marcha genera picos de corriente destructivos.</div>
                         </li>
                         <li class="flex items-start">
                             <span class="text-sky-400 mr-4 mt-1 text-2xl">⏱️</span>
                             <div><strong>Uso de Temporizadores:</strong> En sistemas automáticos, un temporizador debe forzar una pausa entre la desconexión de un sentido y la conexión del otro, garantizando la detención total.</div>
                         </li>
                         <li class="flex items-start">
                              <span class="text-sky-400 mr-4 mt-1 text-2xl">🔄</span>
                             <div><strong>Inversión del Bobinado Auxiliar:</strong> El cambio de giro se logra invirtiendo la polaridad del bobinado auxiliar (de arranque), nunca el principal.</div>
                         </li>
                         <li class="flex items-start">
                              <span class="text-sky-400 mr-4 mt-1 text-2xl">🔒</span>
                             <div><strong>Enclavamiento de Contactores:</strong> Es obligatorio usar enclavamientos (eléctricos y/o mecánicos) para impedir que los contactores de ambos sentidos se activen a la vez, previniendo cortocircuitos.</div>
                         </li>
                          <li class="flex items-start">
                              <span class="text-sky-400 mr-4 mt-1 text-2xl">💡</span>
                              <div><strong>Señalización Visual:</strong> Incorporar luces indicadoras para mostrar el sentido de giro activo ayuda a prevenir errores humanos durante la operación o mantenimiento.</div>
                         </li>
                     </ul>
                 </div>
            </div>
        </section>

        <!-- Maneuver Devices Section -->
        <section id="dispositivos" class="py-16 md:py-24 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="section-title">Dispositivos de Maniobra</h2>
                    <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 section-subtitle">Diferentes tecnologías permiten controlar la inversión de giro, cada una con sus ventajas.</p>
                    <div class="h-line mt-6"></div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-sky-400 mb-4">Interruptor Manual</h3>
                        <p class="text-gray-300">Un selector de tres posiciones (avance, parada, retroceso) que cambia las conexiones manualmente. Es una solución simple y económica para maniobras locales y ocasionales.</p>
                    </div>
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-sky-400 mb-4">Contactores</h3>
                        <p class="text-gray-300">El método estándar para automatización. Se usan dos contactores enclavados para controlar cada sentido de giro, permitiendo el control a distancia y la integración con otras lógicas.</p>
                    </div>
                    <div class="card p-8 md:col-span-2 lg:col-span-1">
                        <h3 class="text-2xl font-bold text-sky-400 mb-4">Variador de Frecuencia (VFD)</h3>
                        <p class="text-gray-300">La solución más avanzada. Permite la inversión de giro por programación, además de ofrecer arranque suave, control de velocidad y protecciones integradas, como se ha visto en este proyecto.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Conclusion Section -->
        <section id="conclusion" class="py-16 md:py-24 bg-gray-800/50 presentation-slide">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                     <h2 class="section-title">Conclusión Final y Resumen Técnico</h2>
                     <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-400 section-subtitle">En resumen, hemos demostrado que el proyecto de automatizar una bomba de riego con un motor monofásico y un VFD no solo es técnicamente viable, sino que ofrece beneficios operativos transformadores. El éxito de la implementación depende del cumplimiento de condiciones de diseño estrictas.</p>
                     <div class="h-line mt-6"></div>
                </div>
                 <div class="max-w-4xl mx-auto card p-8">
                     <h3 class="text-2xl font-bold text-center text-sky-400 mb-6">Puntos Clave a Recordar</h3>
                     <ul class="space-y-4 text-left text-lg">
                         <li class="flex items-start">
                             <span class="text-sky-400 mr-3 mt-1">✔</span>
                             <div><strong>Selección del Motor:</strong> Debe ser de tipo PSC (Capacitor Permanente), sin interruptor centrífugo.</div>
                         </li>
                         <li class="flex items-start">
                             <span class="text-sky-400 mr-3 mt-1">✔</span>
                             <div><strong>Modificación del Motor:</strong> El capacitor de marcha original debe ser retirado físicamente.</div>
                         </li>
                         <li class="flex items-start">
                             <span class="text-sky-400 mr-3 mt-1">✔</span>
                             <div><strong>Beneficios Clave:</strong> Se logra un arranque suave que protege la mecánica, se elimina el golpe de ariete y se obtiene un control de velocidad para un uso eficiente del agua.</div>
                         </li>
                         <li class="flex items-start">
                             <span class="text-sky-400 mr-3 mt-1">✔</span>
                             <div><strong>Inversión de Giro Segura:</strong> La única forma segura es con un circuito externo de contactores, protegido por enclavamientos dobles (mecánico y eléctrico) y un temporizador de retardo.</div>
                         </li>
                     </ul>
                 </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white mt-16 border-t border-gray-700">
        <div class="container mx-auto px-6 py-8 text-center">
            <p class="font-semibold text-lg text-sky-400">Guía Interactiva de Automatización de Bomba</p>
            <p class="text-gray-400 mt-2">Aplicación desarrollada para la exposición sobre control avanzado de motores monofásicos.</p>
        </div>
    </footer>

    <!-- Image Modal -->
    <div id="image-modal" class="image-modal-backdrop fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[70] hidden opacity-0">
        <div class="image-modal-content bg-gray-800 border border-gray-700 text-white p-4 rounded-lg shadow-xl w-11/12 max-w-4xl max-h-[90vh] flex flex-col scale-95 opacity-0 relative">
            <button id="modal-close-btn" class="absolute -top-4 -right-4 bg-white text-black rounded-full h-10 w-10 flex items-center justify-center text-2xl font-bold shadow-lg">&times;</button>
            <div id="modal-title-container" class="flex-shrink-0 mb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-sky-400"></h3>
            </div>
            <div class="flex-grow overflow-hidden flex items-center justify-center">
                <img id="modal-image" src="" alt="" class="max-w-full max-h-full object-contain">
            </div>
            <div id="modal-description-container" class="flex-shrink-0 mt-4">
                <p id="modal-description" class="text-gray-300"></p>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Fullscreen toggle
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            fullscreenBtn.addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                    });
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                }
            });

            // Header visibility on scroll
            const mainHeader = document.getElementById('main-header');
            const coverSection = document.getElementById('caratula');
            const headerObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    mainHeader.style.opacity = entry.isIntersecting ? '0' : '1';
                });
            }, { threshold: 0.1 });
            headerObserver.observe(coverSection);

            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });

            // Active nav link on scroll
            const sections = Array.from(document.querySelectorAll('main section'));
            const allSlidesForNav = [document.getElementById('caratula'), ...sections];
            const navLinks = document.querySelectorAll('.nav-link');
            
            window.onscroll = () => {
                if(presentationModeActive) return;
                let current = '';
                allSlidesForNav.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active');
                    }
                });
            };

            // Cover interaction
            const startBtn = document.getElementById('start-presentation-btn');
            const initialContent = document.getElementById('initial-content-wrapper');
            const integrantesContent = document.getElementById('integrantes-content-wrapper');
            const firstSection = document.getElementById('intro');

            startBtn.addEventListener('click', (e) => {
                e.preventDefault();
                initialContent.style.opacity = '0';
                initialContent.style.pointerEvents = 'none';
                
                integrantesContent.style.opacity = '1';
                integrantesContent.style.pointerEvents = 'auto';

                setTimeout(() => {
                    firstSection.scrollIntoView({ behavior: 'smooth' });
                }, 2500); 
            });


            // Presentation Mode
            const playBtn = document.getElementById('play-presentation-btn');
            const playIcon = document.getElementById('play-icon');
            const stopIcon = document.getElementById('stop-icon');
            const prevNav = document.getElementById('presentation-nav-prev');
            const nextNav = document.getElementById('presentation-nav-next');
            const prevBtn = prevNav.querySelector('button');
            const nextBtn = nextNav.querySelector('button');
            
            let presentationModeActive = false;
            let currentSlide = 0;
            const allSlides = [document.getElementById('caratula'), ...sections];

            function updateNavButtons() {
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === allSlides.length - 1;
            }

            function showSlide(index) {
                 allSlides.forEach((slide, i) => {
                    slide.classList.toggle('active-slide', i === index);
                 });
                 allSlides[index].scrollIntoView({ behavior: 'smooth', block: 'center' });
                 updateNavButtons();
            }

            playBtn.addEventListener('click', () => {
                presentationModeActive = !presentationModeActive;
                document.body.classList.toggle('presentation-mode', presentationModeActive);

                playIcon.classList.toggle('hidden', presentationModeActive);
                stopIcon.classList.toggle('hidden', !presentationModeActive);
                
                const navOpacity = presentationModeActive ? '1' : '0';
                const navEvents = presentationModeActive ? 'auto' : 'none';

                prevNav.style.opacity = navOpacity;
                nextNav.style.opacity = navOpacity;
                prevNav.style.pointerEvents = navEvents;
                nextNav.style.pointerEvents = navEvents;

                if (presentationModeActive) {
                    showSlide(currentSlide);
                } else {
                    allSlides.forEach(slide => slide.classList.remove('active-slide'));
                    window.scrollTo({ top: allSlides[currentSlide].offsetTop, behavior: 'smooth' });
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentSlide < allSlides.length - 1) {
                    currentSlide++;
                    showSlide(currentSlide);
                }
            });

            prevBtn.addEventListener('click', () => {
                if (currentSlide > 0) {
                    currentSlide--;
                    showSlide(currentSlide);
                }
            });

            const slideObserver = new IntersectionObserver((entries) => {
                if(!presentationModeActive) return;
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const intersectingSlideIndex = allSlides.findIndex(slide => slide.id === entry.target.id);
                        if (intersectingSlideIndex !== -1) {
                            currentSlide = intersectingSlideIndex;
                            updateNavButtons();
                        }
                    }
                });
            }, { threshold: 0.6 });

            allSlides.forEach(slide => slideObserver.observe(slide));
            
            // Image Modal Logic
            const modal = document.getElementById('image-modal');
            const modalImg = document.getElementById('modal-image');
            const modalTitle = document.getElementById('modal-title');
            const modalDescription = document.getElementById('modal-description');
            const closeModalBtn = document.getElementById('modal-close-btn');

            document.querySelectorAll('.clickable-image').forEach(img => {
                img.addEventListener('click', () => {
                    const titleText = img.dataset.title || 'Imagen Ampliada';
                    const descriptionText = img.dataset.description || '';
                    
                    modalImg.src = img.src;
                    modalTitle.textContent = titleText;
                    modalDescription.textContent = descriptionText;

                    modal.classList.remove('hidden');
                    setTimeout(() => {
                        modal.classList.remove('opacity-0');
                        modal.querySelector('.image-modal-content').classList.remove('opacity-0', 'scale-95');
                    }, 10);
                });
            });

            const closeModal = () => {
                modal.querySelector('.image-modal-content').classList.add('opacity-0', 'scale-95');
                 modal.classList.add('opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
            
            // VFD Simulator
            const slider = document.getElementById('frequency-slider');
            const motorShaft = document.getElementById('motor-shaft');
            const speedOutput = document.getElementById('speed-output');
            const voltageOutput = document.getElementById('voltage-output');
            const torqueOutput = document.getElementById('torque-output');
            const rpmOutput = document.getElementById('rpm-output');
            const motorControlBtn = document.getElementById('motor-control-btn');
            
            let currentRotation = 0;
            let animationFrameId;
            let motorState = 'stopped';
            let rampInterval;

            function animateMotor(speed) {
                if (motorState !== 'running' && motorState !== 'ramping-up') {
                    cancelAnimationFrame(animationFrameId);
                    return;
                }
                currentRotation += speed;
                motorShaft.style.transform = `rotate(${currentRotation}deg)`;
                animationFrameId = requestAnimationFrame(() => animateMotor(speed));
            }

            function updateDisplay(frequency, voltage) {
                const maxFreq = 50;
                const speedPercentage = (frequency / maxFreq) * 100;
                speedOutput.textContent = `${speedPercentage.toFixed(0)}%`;
                voltageOutput.textContent = `${voltage.toFixed(0)} V`;
                
                const nominalRPM = 1500;
                const rpm = (frequency / maxFreq) * nominalRPM;
                rpmOutput.textContent = `${rpm.toFixed(0)}`;

                const nominalPower = 1119; // 1.5 HP in Watts
                const nominalAngularSpeed = 50 * 2 * Math.PI;
                const nominalTorque = (nominalPower / nominalAngularSpeed);
                
                let currentTorque = nominalTorque * (voltage / 220);
                torqueOutput.textContent = `${currentTorque.toFixed(2)} Nm`;

                cancelAnimationFrame(animationFrameId);
                const animationSpeed = (rpm / nominalRPM) * 30;
                if (animationSpeed > 0) {
                    animateMotor(animationSpeed);
                }
            }
            
            motorControlBtn.addEventListener('click', () => {
                if (motorState === 'stopped') {
                    motorState = 'ramping-up';
                    motorControlBtn.disabled = true;
                    motorControlBtn.textContent = 'Arrancando...';
                    
                    let currentFreq = 0;
                    const targetFreq = 50;
                    const rampDuration = 3000; // 3 seconds for full ramp
                    const steps = 50;
                    const stepTime = rampDuration / steps;
                    const freqStep = targetFreq / steps;

                    rampInterval = setInterval(() => {
                        currentFreq += freqStep;
                        if (currentFreq >= targetFreq) {
                            currentFreq = targetFreq;
                            clearInterval(rampInterval);
                            motorState = 'running';
                            motorControlBtn.textContent = 'Detener Motor';
                            motorControlBtn.classList.replace('btn-start-motor', 'btn-reset-motor');
                            motorControlBtn.disabled = false;
                            slider.disabled = false;
                        }
                        slider.value = currentFreq;
                        const currentVoltage = (currentFreq / targetFreq) * 220;
                        updateDisplay(currentFreq, currentVoltage);
                    }, stepTime);

                } else {
                    motorState = 'stopped';
                    cancelAnimationFrame(animationFrameId);
                    clearInterval(rampInterval);
                    slider.disabled = true;
                    slider.value = 0;
                    updateDisplay(0,0);
                    motorControlBtn.textContent = 'Arrancar Motor';
                    motorControlBtn.classList.replace('btn-reset-motor', 'btn-start-motor');
                    motorControlBtn.disabled = false;
                }
            });

            slider.addEventListener('input', (e) => {
                if (motorState !== 'running') return;
                const frequency = parseFloat(e.target.value);
                const voltage = (frequency / 50) * 220;
                updateDisplay(frequency, voltage);
            });

            // Interactive Motor Parts Logic (List-based)
            const motorPartButtons = document.querySelectorAll('.motor-part-btn');
            const motorPartInfoDivs = document.querySelectorAll('#motor-part-info-display .motor-part-info');

            motorPartButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const partId = 'part-' + button.dataset.part;

                    // Update button styles
                    motorPartButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    // Update description visibility
                    motorPartInfoDivs.forEach(div => {
                        div.classList.add('hidden', 'opacity-0');
                    });

                    const targetInfo = document.getElementById(partId);
                    if (targetInfo) {
                        targetInfo.classList.remove('hidden');
                        setTimeout(() => targetInfo.classList.remove('opacity-0'), 10);
                    }
                });
            });

        });
    </script>
</body>
</html>
